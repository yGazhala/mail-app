# mail-app
Single page application with Angular 1.5 and Firebase
<h2><a href="http://ygazhala.github.io/mail-app">Demo</a></h2>
<h2>Текущая версия на 25 апреля</h2>
<h2>Что еще не реализовано:</h2>
<ul>
<li>автокомплит в форме отправки письма еще не реализован;</li>
<li>стили CSS сейчас вынесены в один файл, будут разделены и добавленны к компонентам;</li>
<li>нет юнит тестов;</li>
<li>сборка вебпаком будет улучшена;</li>
</ul>
<h2>1. Вопрос по размещению авторизации:</h2>
<p>Авторизацию login/pass сделал с помощью сервиса AngularFire, следовал советам из документации и использовал свойство resolve в ui.router и событие StateChangeError. Сейчас авторизация в приложении размещена следующим образом:</p>
<ul>
<li>В модуле services создан сервис AuthService который инжектит объект от библиотеки AngularFire и предоставлят двя метода, которые используются в приложении: <code>authWithPassword() и unauth()</code></li>
<li>В приложении есть 2 корневых родительских стейта: login и account. Стейт account описан в файле shared/index.route.js. В его resolve метод $requireAuth() запрашивает данные о авторизации, если в ответ приходит null генерируется ошибка $stateChangeError. Обработчик этой ошибки находится в блоке run в файле auth/index.js, он слушает ошибки на уровне $rootScope, и если ошибка 'AUTH_REQUIRED' - перенаправляет на стейт login</li>
<li>Компонент login находится в модуле auth/login. Он выполняет проверку пользователя с помощью метода authWithPassword() и в случае успеха перенаправляет пользователя на стейт account</li>
<li>Вопрос: как улучшить авторизацию, разместить её более компактно, чтобы можно было изолировать её в одном модуле auth?</li>
</ul>

<h2>2. Вопрос по общему компоненту pageMask:</h2>
<p>Файлы этого компонента находятся в shared/page-mask/, управляется он сервисом PageMaskService, который находится в этой же директории. Вопрос такой: если мы пропишем в адресной строке: account/contacts-list/add-user - откроется форма и откроется маска, но если потом мы пропишем account/contacts-list - вернемся назад, маска не закроется, нужно будет только перегрузить страницу, чтобы она закрылась. Команда открыть/закрыть маску описана в контроллере стейта в файле contacts/index.route.js 10 строка. Как можно разрешить это баг?</p>


